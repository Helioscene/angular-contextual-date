!function(){"use strict";angular.module("angular-contextual-date",[])}();
!function(){"use strict";function t(){var t={scope:{datetime:"=",timezone:"="},restrict:"EA",controller:e,controllerAs:"CDC",template:"<span ng-bind='CDC.cDateFormatted'></span>",bindToController:!0};return t}function e(t){function e(){n.cDateFormatted=t.format(n.datetime,null,n.timezone)}var n=this;n.cDateFormatted="",e()}angular.module("angular-contextual-date").directive("contextualDate",t),t.$inject=[],e.$inject=["contextualDateService"]}();
!function(){"use strict";function t(t){function n(n,e){return t.format(n,null,e)}return n}angular.module("angular-contextual-date").filter("contextualDate",t),t.$inject=["contextualDateService"]}();
!function(){"use strict";function e(e,t){function a(e,t,a){var n=i.parseDate(e);if(isNaN(n))return e;var r,o,s=new Date;if(o=i.formatRelative(n,s),i.config.hideFullDate)return o;r=t?t:i.formatFull(n,s,a);var u=i.config.contextualDateFormat,l=u.replace("%fullDate%",r).replace("%relativeDate%",o);return l}function n(t,a,n){var r=i.parseDate(t);if(isNaN(r))return t;a=a||new Date;var o="",s=i.config.thresholds,u=r.getDate()===a.getDate()&&r.getMonth()===a.getMonth()&&r.getFullYear()===a.getFullYear(),l=new Date(a.getTime());l.setDate(l.getDate()-Math.round(31*s.month));var m=r.getTime()-l.getTime()>=0,d=new Date(a.getTime());d.setDate(d.getDate()-Math.round(365*s.year));var h=r.getTime()-d.getTime()>=0,c=e("date"),g=i.config.fullDateFormats;return o=u?c(r,g.today,n):m?c(r,g.thisMonth,n):h?c(r,g.thisYear,n):c(r,g.historical,n)}function r(e){return Array.prototype.join.call(arguments," ").trim()}function o(e,a){var n=i.parseDate(e);if(isNaN(n))return e;a=a||new Date;var o,s=i.config.language,u=t[0].documentElement.lang;s&&(o=i.languages[s]),!o&&u&&(o=i.languages[u]),o||(o=i.languages.en_US);var l=a.getTime()-n.getTime(),m=l,d=m/1e3,h=d/60,c=h/60,g=c/24,f=g/7,D=g/30,y=g/365,M="",w=i.config.thresholds;return y>=w.years?M=r(Math.round(y),o.years):y>=w.year?M=r(1,o.year):D>=w.months?M=r(Math.round(D),o.months):D>=w.month?M=r(1,o.month):f>=w.weeks?M=r(Math.round(f),o.weeks):f>=w.week?M=r(1,o.week):g>=w.days?M=r(Math.round(g),o.days):g>=w.day?M=r(1,o.day):c>=w.hours?M=r(Math.round(c),o.hours):c>=w.hour?M=r(1,o.hour):h>=w.minutes?M=r(Math.round(h),o.minutes):h>=w.minute?M=r(1,o.minute):d>=w.seconds?M=r(Math.round(d),o.seconds):d>=w.second?M=r(1,o.second):m>=w.milliseconds?M=r(Math.round(m),o.milliseconds):m>=w.millisecond&&(M=r(1,o.millisecond)),M=M?r(o.prefix,M,o.suffix):o.now}function s(e){return e instanceof Date?e:new Date(angular.isNumber(e)?e:/^\d+$/.test(e)?parseInt(e,10):e)}var i={format:a,formatRelative:o,formatFull:n,parseDate:s,config:{hideFullDate:!1,fullDateFormats:{today:"h:mm a",thisMonth:"MMM d 'at' h:mm a",thisYear:"MMM d",historical:"MMM d, y"},contextualDateFormat:"%fullDate% (%relativeDate%)",language:null,thresholds:{years:1.75,year:.75,months:1.75,month:.9,weeks:1.75,week:1,days:2,day:1,hours:2,hour:1,minutes:2,minute:1,seconds:2,second:1,milliseconds:2,millisecond:1}},languages:{en_US:{now:"just now",prefix:"",suffix:"ago",millisecond:"millisecond",milliseconds:"milliseconds",second:"second",seconds:"seconds",minute:"minute",minutes:"minutes",hour:"hour",hours:"hours",day:"day",days:"days",week:"week",weeks:"weeks",month:"month",months:"months",year:"year",years:"years"}}};return i}angular.module("angular-contextual-date").factory("contextualDateService",e),e.$inject=["$filter","$document"]}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRleHR1YWwtZGF0ZS5tb2R1bGUuanMiLCJjb250ZXh0dWFsLWRhdGUuZGlyZWN0aXZlLmpzIiwiY29udGV4dHVhbC1kYXRlLmZpbHRlci5qcyIsImNvbnRleHR1YWwtZGF0ZS5zZXJ2aWNlLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJjb250ZXh0dWFsRGF0ZURpcmVjdGl2ZSIsImRpcmVjdGl2ZSIsInNjb3BlIiwiZGF0ZXRpbWUiLCJ0aW1lem9uZSIsInJlc3RyaWN0IiwiY29udHJvbGxlciIsIkNvbnRleHR1YWxEYXRlQ29udHJvbGxlciIsImNvbnRyb2xsZXJBcyIsInRlbXBsYXRlIiwiYmluZFRvQ29udHJvbGxlciIsImNvbnRleHR1YWxEYXRlU2VydmljZSIsImFjdGl2YXRlIiwidm0iLCJjRGF0ZUZvcm1hdHRlZCIsImZvcm1hdCIsInRoaXMiLCIkaW5qZWN0IiwiY29udGV4dHVhbERhdGVGaWx0ZXIiLCJmaWx0ZXIiLCJ2YWx1ZSIsIiRmaWx0ZXIiLCIkZG9jdW1lbnQiLCJkYXRlIiwiZnVsbERhdGVPdmVycmlkZSIsImxkYXRlIiwic2VydmljZSIsInBhcnNlRGF0ZSIsImlzTmFOIiwiZnVsbERhdGUiLCJyZWxhdGl2ZURhdGUiLCJub3ciLCJEYXRlIiwiZm9ybWF0UmVsYXRpdmUiLCJjb25maWciLCJoaWRlRnVsbERhdGUiLCJmb3JtYXRGdWxsIiwiZm9ybWF0dGVyIiwiY29udGV4dHVhbERhdGVGb3JtYXQiLCJyZXN1bHQiLCJyZXBsYWNlIiwidGhyZXNob2xkcyIsImlzVG9kYXkiLCJnZXREYXRlIiwiZ2V0TW9udGgiLCJnZXRGdWxsWWVhciIsInRoaXNNb250aCIsImdldFRpbWUiLCJzZXREYXRlIiwiTWF0aCIsInJvdW5kIiwibW9udGgiLCJpc1RoaXNNb250aCIsInRoaXNZZWFyIiwieWVhciIsImlzVGhpc1llYXIiLCIkZGF0ZUZpbHRlciIsImRhdGVGb3JtYXRzIiwiZnVsbERhdGVGb3JtYXRzIiwidG9kYXkiLCJoaXN0b3JpY2FsIiwicGFkIiwiYXJncyIsIkFycmF5IiwicHJvdG90eXBlIiwiam9pbiIsImNhbGwiLCJhcmd1bWVudHMiLCJ0cmltIiwibGFuZyIsInNsYW5nIiwibGFuZ3VhZ2UiLCJkbGFuZyIsImRvY3VtZW50RWxlbWVudCIsImxhbmd1YWdlcyIsImVuX1VTIiwiZGlmZiIsIm1pbGxpc2Vjb25kcyIsInNlY29uZHMiLCJtaW51dGVzIiwiaG91cnMiLCJkYXlzIiwid2Vla3MiLCJtb250aHMiLCJ5ZWFycyIsInJlbGF0aXZlIiwidGgiLCJ3ZWVrIiwiZGF5IiwiaG91ciIsIm1pbnV0ZSIsInNlY29uZCIsIm1pbGxpc2Vjb25kIiwicHJlZml4Iiwic3VmZml4IiwiaW5wdXQiLCJpc051bWJlciIsInRlc3QiLCJwYXJzZUludCIsImZhY3RvcnkiXSwibWFwcGluZ3MiOiJDQUFBLFdBQ0EsWUFFQUEsU0FBUUMsT0FBTztDQ0hmLFdBQ0EsWUFPQSxTQUFTQyxLQUNMLEdBQUlDLElBQ0FDLE9BQ0lDLFNBQVUsSUFDVkMsU0FBVSxLQUVkQyxTQUFVLEtBQ1ZDLFdBQVlDLEVBQ1pDLGFBQWMsTUFDZEMsU0FBVSw2Q0FDVkMsa0JBQWtCLEVBR3RCLE9BQU9ULEdBSVgsUUFBU00sR0FBMEJJLEdBWS9CLFFBQVNDLEtBQ0xDLEVBQUdDLGVBQWlCSCxFQUFzQkksT0FDdENGLEVBQUdWLFNBQ0gsS0FDQVUsRUFBR1QsVUFmWCxHQUFJUyxHQUFLRyxJQU9USCxHQUFHQyxlQUFpQixHQUVwQkYsSUFoQ0pkLFFBQ0tDLE9BQU8sMkJBQ1BFLFVBQVUsaUJBQWtCRCxHQUVqQ0EsRUFBd0JpQixXQWlCeEJWLEVBQXlCVSxTQUFXO0NDeEJwQyxXQUNBLFlBUUEsU0FBU0MsR0FBc0JQLEdBRzNCLFFBQVNRLEdBQVFDLEVBQU9oQixHQUNwQixNQUFPTyxHQUFzQkksT0FBT0ssRUFBTyxLQUFNaEIsR0FIckQsTUFBT2UsR0FQWHJCLFFBQ0tDLE9BQU8sMkJBQ1BvQixPQUFPLGlCQUFrQkQsR0FFOUJBLEVBQXFCRCxTQUFX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Q1YrRCxFQUdBLEdBQUkvRCxNQURKbEMsUUFBUWtHLFNBQVNELEdBQ1JBLEVBRVQsUUFBUUUsS0FBS0YsR0FDSkcsU0FBU0gsRUFBTyxJQUdoQkEsR0ExT3hCLEdBQUlyRSxJQUVBWCxPQUFRQSxFQUNSa0IsZUFBZ0JBLEVBQ2hCRyxXQUFZQSxFQUNaVCxVQUFXQSxFQUdYTyxRQUNJQyxjQUFlLEVBRWZ1QixpQkFDSUMsTUFBTyxTQUNQYixVQUFXLG9CQUNYTyxTQUFVLFFBQ1ZPLFdBQVksWUFHaEJ0QixxQkFBc0IsOEJBRXRCaUMsU0FBVSxLQUVWOUIsWUFDSTJDLE1BQU8sS0FDUDlCLEtBQU0sSUFDTjZCLE9BQVEsS0FDUmhDLE1BQU8sR0FDUCtCLE1BQU8sS0FDUEssS0FBTSxFQUNOTixLQUFNLEVBQ05PLElBQUssRUFDTFIsTUFBTyxFQUNQUyxLQUFNLEVBQ05WLFFBQVMsRUFDVFcsT0FBUSxFQUNSWixRQUFTLEVBQ1RhLE9BQVEsRUFDUmQsYUFBYyxFQUNkZSxZQUFhLElBS3JCbEIsV0FDSUMsT0FFSTVDLElBQUssV0FFTDhELE9BQVEsR0FDUkMsT0FBUSxNQUVSRixZQUFhLGNBQ2JmLGFBQWMsZUFDZGMsT0FBUSxTQUNSYixRQUFTLFVBQ1RZLE9BQVEsU0FDUlgsUUFBUyxVQUNUVSxLQUFNLE9BQ05ULE1BQU8sUUFDUFEsSUFBSyxNQUNMUCxLQUFNLE9BQ05NLEtBQU0sT0FDTkwsTUFBTyxRQUNQL0IsTUFBTyxRQUNQZ0MsT0FBUSxTQUNSN0IsS0FBTSxPQUNOOEIsTUFBTyxVQUtuQixPQUFPMUQsR0E5RVg1QixRQUNLQyxPQUFPLDJCQUNQb0csUUFBUSx3QkFBeUJ4RixHQUV0Q0EsRUFBc0JNLFNBQVcsVUFBVyIsImZpbGUiOiJhbmd1bGFyLWNvbnRleHR1YWwtZGF0ZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKCkge1xyXG4ndXNlIHN0cmljdCc7XHJcblxyXG5hbmd1bGFyLm1vZHVsZSgnYW5ndWxhci1jb250ZXh0dWFsLWRhdGUnLCBbXSk7XHJcblxyXG59KSgpO1xyXG4iLCIoZnVuY3Rpb24gKCkge1xyXG4ndXNlIHN0cmljdCc7XHJcblxyXG5hbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhbmd1bGFyLWNvbnRleHR1YWwtZGF0ZScpXHJcbiAgICAuZGlyZWN0aXZlKCdjb250ZXh0dWFsRGF0ZScsIGNvbnRleHR1YWxEYXRlRGlyZWN0aXZlKTtcclxuXHJcbmNvbnRleHR1YWxEYXRlRGlyZWN0aXZlLiRpbmplY3QgPSBbXTtcclxuZnVuY3Rpb24gY29udGV4dHVhbERhdGVEaXJlY3RpdmUgKCkge1xyXG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcclxuICAgICAgICBzY29wZSA6IHtcclxuICAgICAgICAgICAgZGF0ZXRpbWU6IFwiPVwiLFxyXG4gICAgICAgICAgICB0aW1lem9uZTogXCI9XCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlc3RyaWN0OiBcIkVBXCIsXHJcbiAgICAgICAgY29udHJvbGxlcjogQ29udGV4dHVhbERhdGVDb250cm9sbGVyLFxyXG4gICAgICAgIGNvbnRyb2xsZXJBczogXCJDRENcIixcclxuICAgICAgICB0ZW1wbGF0ZTogXCI8c3BhbiBuZy1iaW5kPSdDREMuY0RhdGVGb3JtYXR0ZWQnPjwvc3Bhbj5cIixcclxuICAgICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBkaXJlY3RpdmU7XHJcbn1cclxuXHJcbkNvbnRleHR1YWxEYXRlQ29udHJvbGxlci4kaW5qZWN0ID0gWydjb250ZXh0dWFsRGF0ZVNlcnZpY2UnXTtcclxuZnVuY3Rpb24gQ29udGV4dHVhbERhdGVDb250cm9sbGVyIChjb250ZXh0dWFsRGF0ZVNlcnZpY2UpIHtcclxuICAgIHZhciB2bSA9IHRoaXM7XHJcblxyXG4gICAgLy8gRGlyZWN0aXZlIHZhcmlhYmxlc1xyXG4gICAgLy8gdm0uZGF0ZXRpbWVcclxuICAgIC8vIHZtLnRpbWV6b25lXHJcblxyXG4gICAgLy8gTG9jYWwgdmFyaWFibGVzXHJcbiAgICB2bS5jRGF0ZUZvcm1hdHRlZCA9IFwiXCI7XHJcblxyXG4gICAgYWN0aXZhdGUoKTtcclxuXHJcbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSAoKSB7XHJcbiAgICAgICAgdm0uY0RhdGVGb3JtYXR0ZWQgPSBjb250ZXh0dWFsRGF0ZVNlcnZpY2UuZm9ybWF0KFxyXG4gICAgICAgICAgICB2bS5kYXRldGltZSxcclxuICAgICAgICAgICAgbnVsbCwgLyogb3ZlcnJpZGVEYXRlICovXHJcbiAgICAgICAgICAgIHZtLnRpbWV6b25lXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxufSkoKTtcclxuIiwiKGZ1bmN0aW9uICgpIHtcclxuJ3VzZSBzdHJpY3QnO1xyXG5cclxuYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYW5ndWxhci1jb250ZXh0dWFsLWRhdGUnKVxyXG4gICAgLmZpbHRlcignY29udGV4dHVhbERhdGUnLCBjb250ZXh0dWFsRGF0ZUZpbHRlcik7XHJcblxyXG5jb250ZXh0dWFsRGF0ZUZpbHRlci4kaW5qZWN0ID0gWydjb250ZXh0dWFsRGF0ZVNlcnZpY2UnXTtcclxuXHJcbmZ1bmN0aW9uIGNvbnRleHR1YWxEYXRlRmlsdGVyIChjb250ZXh0dWFsRGF0ZVNlcnZpY2UpIHtcclxuICAgIHJldHVybiBmaWx0ZXI7XHJcblxyXG4gICAgZnVuY3Rpb24gZmlsdGVyICh2YWx1ZSwgdGltZXpvbmUpIHtcclxuICAgICAgICByZXR1cm4gY29udGV4dHVhbERhdGVTZXJ2aWNlLmZvcm1hdCh2YWx1ZSwgbnVsbCwgdGltZXpvbmUpO1xyXG4gICAgfVxyXG59XHJcblxyXG59KSgpO1xyXG4iLCIoZnVuY3Rpb24gKCkge1xyXG4ndXNlIHN0cmljdCc7XHJcblxyXG5hbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhbmd1bGFyLWNvbnRleHR1YWwtZGF0ZScpXHJcbiAgICAuZmFjdG9yeSgnY29udGV4dHVhbERhdGVTZXJ2aWNlJywgY29udGV4dHVhbERhdGVTZXJ2aWNlKTtcclxuXHJcbmNvbnRleHR1YWxEYXRlU2VydmljZS4kaW5qZWN0ID0gW1wiJGZpbHRlclwiLCBcIiRkb2N1bWVudFwiXTtcclxuXHJcbmZ1bmN0aW9uIGNvbnRleHR1YWxEYXRlU2VydmljZSAoJGZpbHRlciwgJGRvY3VtZW50KSB7XHJcbiAgICB2YXIgc2VydmljZSA9IHtcclxuICAgICAgICAvLyBmdW5jdGlvbnNcclxuICAgICAgICBmb3JtYXQ6IGZvcm1hdCxcclxuICAgICAgICBmb3JtYXRSZWxhdGl2ZTogZm9ybWF0UmVsYXRpdmUsXHJcbiAgICAgICAgZm9ybWF0RnVsbDogZm9ybWF0RnVsbCxcclxuICAgICAgICBwYXJzZURhdGU6IHBhcnNlRGF0ZSxcclxuXHJcbiAgICAgICAgLy8gY29uZmlndXJhdGlvbnNcclxuICAgICAgICBjb25maWc6IHtcclxuICAgICAgICAgICAgaGlkZUZ1bGxEYXRlIDogZmFsc2UsXHJcblxyXG4gICAgICAgICAgICBmdWxsRGF0ZUZvcm1hdHMgOiB7XHJcbiAgICAgICAgICAgICAgICB0b2RheTogXCJoOm1tIGFcIixcclxuICAgICAgICAgICAgICAgIHRoaXNNb250aDogXCJNTU0gZCAnYXQnIGg6bW0gYVwiLFxyXG4gICAgICAgICAgICAgICAgdGhpc1llYXI6IFwiTU1NIGRcIixcclxuICAgICAgICAgICAgICAgIGhpc3RvcmljYWw6IFwiTU1NIGQsIHlcIlxyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgY29udGV4dHVhbERhdGVGb3JtYXQ6IFwiJWZ1bGxEYXRlJSAoJXJlbGF0aXZlRGF0ZSUpXCIsXHJcblxyXG4gICAgICAgICAgICBsYW5ndWFnZTogbnVsbCwgLy8gdGhpcyB3aWxsIGhhcmQgc2V0IHRoZSBsYW5ndWFnZVxyXG5cclxuICAgICAgICAgICAgdGhyZXNob2xkczoge1xyXG4gICAgICAgICAgICAgICAgeWVhcnM6IDEuNzUsXHJcbiAgICAgICAgICAgICAgICB5ZWFyOiAwLjc1LFxyXG4gICAgICAgICAgICAgICAgbW9udGhzOiAxLjc1LFxyXG4gICAgICAgICAgICAgICAgbW9udGg6IDAuOSxcclxuICAgICAgICAgICAgICAgIHdlZWtzOiAxLjc1LFxyXG4gICAgICAgICAgICAgICAgd2VlazogMS4wLFxyXG4gICAgICAgICAgICAgICAgZGF5czogMi4wLFxyXG4gICAgICAgICAgICAgICAgZGF5OiAxLjAsXHJcbiAgICAgICAgICAgICAgICBob3VyczogMi4wLFxyXG4gICAgICAgICAgICAgICAgaG91cjogMS4wLFxyXG4gICAgICAgICAgICAgICAgbWludXRlczogMi4wLFxyXG4gICAgICAgICAgICAgICAgbWludXRlOiAxLjAsXHJcbiAgICAgICAgICAgICAgICBzZWNvbmRzOiAyLjAsXHJcbiAgICAgICAgICAgICAgICBzZWNvbmQ6IDEuMCxcclxuICAgICAgICAgICAgICAgIG1pbGxpc2Vjb25kczogMi4wLFxyXG4gICAgICAgICAgICAgICAgbWlsbGlzZWNvbmQ6IDEuMFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgLy8gbGFuZ3VhZ2Ugc3VwcG9ydFxyXG4gICAgICAgIGxhbmd1YWdlcyA6IHtcclxuICAgICAgICAgICAgJ2VuX1VTJzoge1xyXG5cclxuICAgICAgICAgICAgICAgIG5vdzogXCJqdXN0IG5vd1wiLFxyXG5cclxuICAgICAgICAgICAgICAgIHByZWZpeDogXCJcIixcclxuICAgICAgICAgICAgICAgIHN1ZmZpeDogXCJhZ29cIixcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgbWlsbGlzZWNvbmQ6IFwibWlsbGlzZWNvbmRcIixcclxuICAgICAgICAgICAgICAgIG1pbGxpc2Vjb25kczogXCJtaWxsaXNlY29uZHNcIixcclxuICAgICAgICAgICAgICAgIHNlY29uZDogXCJzZWNvbmRcIixcclxuICAgICAgICAgICAgICAgIHNlY29uZHM6IFwic2Vjb25kc1wiLFxyXG4gICAgICAgICAgICAgICAgbWludXRlOiBcIm1pbnV0ZVwiLFxyXG4gICAgICAgICAgICAgICAgbWludXRlczogXCJtaW51dGVzXCIsXHJcbiAgICAgICAgICAgICAgICBob3VyOiBcImhvdXJcIixcclxuICAgICAgICAgICAgICAgIGhvdXJzOiBcImhvdXJzXCIsXHJcbiAgICAgICAgICAgICAgICBkYXk6IFwiZGF5XCIsXHJcbiAgICAgICAgICAgICAgICBkYXlzOiBcImRheXNcIixcclxuICAgICAgICAgICAgICAgIHdlZWs6IFwid2Vla1wiLFxyXG4gICAgICAgICAgICAgICAgd2Vla3M6IFwid2Vla3NcIixcclxuICAgICAgICAgICAgICAgIG1vbnRoOiBcIm1vbnRoXCIsXHJcbiAgICAgICAgICAgICAgICBtb250aHM6IFwibW9udGhzXCIsXHJcbiAgICAgICAgICAgICAgICB5ZWFyOiBcInllYXJcIixcclxuICAgICAgICAgICAgICAgIHllYXJzOiBcInllYXJzXCJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIHNlcnZpY2U7XHJcblxyXG4gICAgZnVuY3Rpb24gZm9ybWF0IChkYXRlLCBmdWxsRGF0ZU92ZXJyaWRlLCB0aW1lem9uZSkge1xyXG4gICAgICAgIHZhciBsZGF0ZSA9IHNlcnZpY2UucGFyc2VEYXRlKGRhdGUpO1xyXG5cclxuICAgICAgICAvLyBXZSB3ZXJlbid0IGFibGUgdG8gcGFyc2UgdGhlIGRhdGUsIGp1c3QgcmV0dXJuIGFzIGlzXHJcbiAgICAgICAgaWYgKGlzTmFOKGxkYXRlKSkgeyByZXR1cm4gZGF0ZTsgfVxyXG5cclxuICAgICAgICB2YXIgbm93ID0gbmV3IERhdGUoKTtcclxuICAgICAgICB2YXIgZnVsbERhdGUsIHJlbGF0aXZlRGF0ZTtcclxuXHJcbiAgICAgICAgcmVsYXRpdmVEYXRlID0gc2VydmljZS5mb3JtYXRSZWxhdGl2ZShsZGF0ZSwgbm93KTtcclxuXHJcbiAgICAgICAgaWYgKHNlcnZpY2UuY29uZmlnLmhpZGVGdWxsRGF0ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVsYXRpdmVEYXRlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGZ1bGxEYXRlT3ZlcnJpZGUpIHtcclxuICAgICAgICAgICAgZnVsbERhdGUgPSBmdWxsRGF0ZU92ZXJyaWRlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZ1bGxEYXRlID0gc2VydmljZS5mb3JtYXRGdWxsKGxkYXRlLCBub3csIHRpbWV6b25lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBmb3JtYXR0ZXIgPSBzZXJ2aWNlLmNvbmZpZy5jb250ZXh0dWFsRGF0ZUZvcm1hdDtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gZm9ybWF0dGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgnJWZ1bGxEYXRlJScsIGZ1bGxEYXRlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoJyVyZWxhdGl2ZURhdGUlJywgcmVsYXRpdmVEYXRlKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBmb3JtYXRGdWxsKGRhdGUsIG5vdywgdGltZXpvbmUpIHtcclxuICAgICAgICB2YXIgbGRhdGUgPSBzZXJ2aWNlLnBhcnNlRGF0ZShkYXRlKTtcclxuICAgICAgICBpZiAoaXNOYU4obGRhdGUpKSB7IHJldHVybiBkYXRlOyB9XHJcblxyXG4gICAgICAgIG5vdyA9IG5vdyB8fCBuZXcgRGF0ZSgpO1xyXG5cclxuICAgICAgICB2YXIgZnVsbERhdGUgPSBcIlwiO1xyXG4gICAgICAgIHZhciB0aHJlc2hvbGRzID0gc2VydmljZS5jb25maWcudGhyZXNob2xkcztcclxuXHJcbiAgICAgICAgdmFyIGlzVG9kYXkgPSAobGRhdGUuZ2V0RGF0ZSgpID09PSBub3cuZ2V0RGF0ZSgpICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZGF0ZS5nZXRNb250aCgpID09PSBub3cuZ2V0TW9udGgoKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGRhdGUuZ2V0RnVsbFllYXIoKSA9PT0gbm93LmdldEZ1bGxZZWFyKCkpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHZhciB0aGlzTW9udGggPSBuZXcgRGF0ZShub3cuZ2V0VGltZSgpKTtcclxuICAgICAgICB0aGlzTW9udGguc2V0RGF0ZSh0aGlzTW9udGguZ2V0RGF0ZSgpIC0gTWF0aC5yb3VuZCh0aHJlc2hvbGRzLm1vbnRoICogMzEpKTtcclxuICAgICAgICB2YXIgaXNUaGlzTW9udGggPSAobGRhdGUuZ2V0VGltZSgpIC0gdGhpc01vbnRoLmdldFRpbWUoKSA+PSAwKTtcclxuXHJcbiAgICAgICAgdmFyIHRoaXNZZWFyID0gbmV3IERhdGUobm93LmdldFRpbWUoKSk7XHJcbiAgICAgICAgdGhpc1llYXIuc2V0RGF0ZSh0aGlzWWVhci5nZXREYXRlKCkgLSBNYXRoLnJvdW5kKHRocmVzaG9sZHMueWVhciAqIDM2NSkpO1xyXG4gICAgICAgIHZhciBpc1RoaXNZZWFyID0gKGxkYXRlLmdldFRpbWUoKSAtIHRoaXNZZWFyLmdldFRpbWUoKSA+PSAwKTtcclxuXHJcbiAgICAgICAgdmFyICRkYXRlRmlsdGVyID0gJGZpbHRlcignZGF0ZScpO1xyXG4gICAgICAgIHZhciBkYXRlRm9ybWF0cyA9IHNlcnZpY2UuY29uZmlnLmZ1bGxEYXRlRm9ybWF0cztcclxuXHJcbiAgICAgICAgaWYgKGlzVG9kYXkpIHtcclxuICAgICAgICAgICAgZnVsbERhdGUgPSAkZGF0ZUZpbHRlcihsZGF0ZSwgZGF0ZUZvcm1hdHMudG9kYXksIHRpbWV6b25lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoaXNUaGlzTW9udGgpIHtcclxuICAgICAgICAgICAgZnVsbERhdGUgPSAkZGF0ZUZpbHRlcihsZGF0ZSwgZGF0ZUZvcm1hdHMudGhpc01vbnRoLCB0aW1lem9uZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGlzVGhpc1llYXIpIHtcclxuICAgICAgICAgICAgZnVsbERhdGUgPSAkZGF0ZUZpbHRlcihsZGF0ZSwgZGF0ZUZvcm1hdHMudGhpc1llYXIsIHRpbWV6b25lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGZ1bGxEYXRlID0gJGRhdGVGaWx0ZXIobGRhdGUsIGRhdGVGb3JtYXRzLmhpc3RvcmljYWwsIHRpbWV6b25lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmdWxsRGF0ZTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBwYWQoYXJncykge1xyXG4gICAgICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuam9pbi5jYWxsKGFyZ3VtZW50cywgXCIgXCIpLnRyaW0oKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBmb3JtYXRSZWxhdGl2ZShkYXRlLCBub3cpIHtcclxuICAgICAgICB2YXIgbGRhdGUgPSBzZXJ2aWNlLnBhcnNlRGF0ZShkYXRlKTtcclxuICAgICAgICBpZiAoaXNOYU4obGRhdGUpKSB7IHJldHVybiBkYXRlOyB9XHJcblxyXG4gICAgICAgIG5vdyA9IG5vdyB8fCBuZXcgRGF0ZSgpO1xyXG5cclxuICAgICAgICB2YXIgc2xhbmcgPSBzZXJ2aWNlLmNvbmZpZy5sYW5ndWFnZTtcclxuICAgICAgICB2YXIgZGxhbmcgPSAkZG9jdW1lbnRbMF0uZG9jdW1lbnRFbGVtZW50Lmxhbmc7XHJcbiAgICAgICAgdmFyIGxhbmc7XHJcblxyXG4gICAgICAgIGlmIChzbGFuZykge1xyXG4gICAgICAgICAgICBsYW5nID0gc2VydmljZS5sYW5ndWFnZXNbc2xhbmddO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWxhbmcgJiYgZGxhbmcpIHtcclxuICAgICAgICAgICAgbGFuZyA9IHNlcnZpY2UubGFuZ3VhZ2VzW2RsYW5nXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFsYW5nKSB7XHJcbiAgICAgICAgICAgIGxhbmcgPSBzZXJ2aWNlLmxhbmd1YWdlcy5lbl9VUztcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGRpZmYgPSBub3cuZ2V0VGltZSgpIC0gbGRhdGUuZ2V0VGltZSgpO1xyXG5cclxuICAgICAgICB2YXIgbWlsbGlzZWNvbmRzID0gZGlmZjtcclxuICAgICAgICB2YXIgc2Vjb25kcyA9IG1pbGxpc2Vjb25kcyAvIDEwMDA7XHJcbiAgICAgICAgdmFyIG1pbnV0ZXMgPSBzZWNvbmRzIC8gNjA7XHJcbiAgICAgICAgdmFyIGhvdXJzID0gbWludXRlcyAvIDYwO1xyXG4gICAgICAgIHZhciBkYXlzID0gaG91cnMgLyAyNDtcclxuICAgICAgICB2YXIgd2Vla3MgPSBkYXlzIC8gNztcclxuICAgICAgICB2YXIgbW9udGhzID0gZGF5cyAvIDMwO1xyXG4gICAgICAgIHZhciB5ZWFycyA9IGRheXMgLyAzNjU7XHJcblxyXG4gICAgICAgIHZhciByZWxhdGl2ZSA9IFwiXCI7XHJcblxyXG4gICAgICAgIHZhciB0aCA9IHNlcnZpY2UuY29uZmlnLnRocmVzaG9sZHM7XHJcblxyXG4gICAgICAgIGlmICh5ZWFycyA+PSB0aC55ZWFycykge1xyXG4gICAgICAgICAgICByZWxhdGl2ZSA9IHBhZChNYXRoLnJvdW5kKHllYXJzKSwgbGFuZy55ZWFycyk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh5ZWFycyA+PSB0aC55ZWFyKSB7XHJcbiAgICAgICAgICAgIHJlbGF0aXZlID0gcGFkKDEsIGxhbmcueWVhcik7XHJcbiAgICAgICAgfSBlbHNlIGlmIChtb250aHMgPj0gdGgubW9udGhzKSB7XHJcbiAgICAgICAgICAgIHJlbGF0aXZlID0gcGFkKE1hdGgucm91bmQobW9udGhzKSwgbGFuZy5tb250aHMpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAobW9udGhzID49IHRoLm1vbnRoKSB7XHJcbiAgICAgICAgICAgIHJlbGF0aXZlID0gcGFkKDEsIGxhbmcubW9udGgpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAod2Vla3MgPj0gdGgud2Vla3MpIHtcclxuICAgICAgICAgICAgcmVsYXRpdmUgPSBwYWQoTWF0aC5yb3VuZCh3ZWVrcyksIGxhbmcud2Vla3MpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAod2Vla3MgPj0gdGgud2Vlaykge1xyXG4gICAgICAgICAgICByZWxhdGl2ZSA9IHBhZCgxLCBsYW5nLndlZWspO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZGF5cyA+PSB0aC5kYXlzKSB7XHJcbiAgICAgICAgICAgIHJlbGF0aXZlID0gcGFkKE1hdGgucm91bmQoZGF5cyksIGxhbmcuZGF5cyk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChkYXlzID49IHRoLmRheSkge1xyXG4gICAgICAgICAgICByZWxhdGl2ZSA9IHBhZCgxLCBsYW5nLmRheSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChob3VycyA+PSB0aC5ob3Vycykge1xyXG4gICAgICAgICAgICByZWxhdGl2ZSA9IHBhZChNYXRoLnJvdW5kKGhvdXJzKSwgbGFuZy5ob3Vycyk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChob3VycyA+PSB0aC5ob3VyKSB7XHJcbiAgICAgICAgICAgIHJlbGF0aXZlID0gcGFkKDEsIGxhbmcuaG91cik7XHJcbiAgICAgICAgfSBlbHNlIGlmIChtaW51dGVzID49IHRoLm1pbnV0ZXMpIHtcclxuICAgICAgICAgICAgcmVsYXRpdmUgPSBwYWQoTWF0aC5yb3VuZChtaW51dGVzKSwgbGFuZy5taW51dGVzKTtcclxuICAgICAgICB9IGVsc2UgaWYgKG1pbnV0ZXMgPj0gdGgubWludXRlKSB7XHJcbiAgICAgICAgICAgIHJlbGF0aXZlID0gcGFkKDEsIGxhbmcubWludXRlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHNlY29uZHMgPj0gdGguc2Vjb25kcykge1xyXG4gICAgICAgICAgICByZWxhdGl2ZSA9IHBhZChNYXRoLnJvdW5kKHNlY29uZHMpLCBsYW5nLnNlY29uZHMpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoc2Vjb25kcyA+PSB0aC5zZWNvbmQpIHtcclxuICAgICAgICAgICAgcmVsYXRpdmUgPSBwYWQoMSwgbGFuZy5zZWNvbmQpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAobWlsbGlzZWNvbmRzID49IHRoLm1pbGxpc2Vjb25kcykge1xyXG4gICAgICAgICAgICByZWxhdGl2ZSA9IHBhZChNYXRoLnJvdW5kKG1pbGxpc2Vjb25kcyksIGxhbmcubWlsbGlzZWNvbmRzKTtcclxuICAgICAgICB9IGVsc2UgaWYgKG1pbGxpc2Vjb25kcyA+PSB0aC5taWxsaXNlY29uZCkge1xyXG4gICAgICAgICAgICByZWxhdGl2ZSA9IHBhZCgxLCBsYW5nLm1pbGxpc2Vjb25kKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghcmVsYXRpdmUpIHtcclxuICAgICAgICAgICAgcmVsYXRpdmUgPSBsYW5nLm5vdztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZWxhdGl2ZSA9IHBhZChsYW5nLnByZWZpeCwgcmVsYXRpdmUsIGxhbmcuc3VmZml4KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZWxhdGl2ZTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBwYXJzZURhdGUgKGlucHV0KSB7XHJcbiAgICAgICAgaWYgKGlucHV0IGluc3RhbmNlb2YgRGF0ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gaW5wdXQ7XHJcbiAgICAgICAgLy8gZGF0ZS5nZXRUaW1lKCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChhbmd1bGFyLmlzTnVtYmVyKGlucHV0KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IERhdGUoaW5wdXQpO1xyXG4gICAgICAgIC8vIGRhdGUuZ2V0VGltZSgpOyBhcyBzdHJpbmdcclxuICAgICAgICB9IGVsc2UgaWYgKC9eXFxkKyQvLnRlc3QoaW5wdXQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShwYXJzZUludChpbnB1dCwgMTApKTtcclxuICAgICAgICAvLyBJU08gLyBVVENcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IERhdGUoaW5wdXQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxufSkoKTtcclxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9